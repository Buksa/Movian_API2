# Документация модуля `fs`

Модуль `fs` предоставляет набор функций для взаимодействия с файловой системой в среде ECMAScript (JavaScript). Он позволяет открывать, читать, записывать и управлять файлами, а также выполнять операции с директориями. Ниже приведено подробное описание каждой функции и примеры их использования.

---

## Функции

### 1. `open(filename, mode)`
Открывает файл в указанном режиме.

- **Аргументы**:
  - `filename` (строка): Путь к файлу.
  - `mode` (строка): Режим открытия файла (`r` для чтения, `w` для записи, `a` для добавления).
- **Возвращает**: Дескриптор файла (число) для открытого файла.
- **Пример**:
  ```javascript
  var fd = fs.open('example.txt', 'r');
  ```

---

### 2. `read(fd, buffer, offset, length, position)`
Читает данные из открытого файла в буфер.

- **Аргументы**:
  - `fd` (число): Дескриптор файла, возвращенный функцией `open`.
  - `buffer` (ArrayBuffer): Буфер для хранения прочитанных данных.
  - `offset` (число): Смещение в буфере, с которого начнется запись данных.
  - `length` (число): Количество байт для чтения.
  - `position` (число или `null`): Позиция в файле, с которой начнется чтение. Если `null`, чтение начнется с текущей позиции.
- **Возвращает**: Количество прочитанных байт.
- **Пример**:
  ```javascript
  var buffer = new ArrayBuffer(100);
  var bytesRead = fs.read(fd, buffer, 0, 100, null);
  console.log(new Uint8Array(buffer).slice(0, bytesRead));
  ```

---

### 3. `write(fd, buffer, offset, length, position)`
Записывает данные из буфера в открытый файл.

- **Аргументы**:
  - `fd` (число): Дескриптор файла, возвращенный функцией `open`.
  - `buffer` (ArrayBuffer): Буфер, содержащий данные для записи.
  - `offset` (число): Смещение в буфере, с которого начнется чтение данных.
  - `length` (число): Количество байт для записи.
  - `position` (число или `null`): Позиция в файле, с которой начнется запись. Если `null`, запись начнется с текущей позиции.
- **Возвращает**: Количество записанных байт.
- **Пример**:
  ```javascript
  var buffer = new ArrayBuffer(100);
  var bytesWritten = fs.write(fd, buffer, 0, 100, null);
  console.log('Записано байт:', bytesWritten);
  ```

---

### 4. `fsize(fd)`
Возвращает размер открытого файла.

- **Аргументы**:
  - `fd` (число): Дескриптор файла, возвращенный функцией `open`.
- **Возвращает**: Размер файла в байтах.
- **Пример**:
  ```javascript
  var size = fs.fsize(fd);
  console.log('Размер файла:', size);
  ```

---

### 5. `ftruncate(fd, size)`
Обрезает открытый файл до указанного размера.

- **Аргументы**:
  - `fd` (число): Дескриптор файла, возвращенный функцией `open`.
  - `size` (число): Новый размер файла в байтах.
- **Пример**:
  ```javascript
  fs.ftruncate(fd, 1024); // Обрезать файл до 1024 байт
  ```

---

### 6. `rename(oldname, newname)`
Переименовывает файл с `oldname` на `newname`.

- **Аргументы**:
  - `oldname` (строка): Текущий путь к файлу.
  - `newname` (строка): Новый путь к файлу.
- **Пример**:
  ```javascript
  fs.rename('oldname.txt', 'newname.txt');
  ```

---

### 7. `mkdirs(path)`
Создает директории рекурсивно.

- **Аргументы**:
  - `path` (строка): Путь к директории, которую нужно создать.
- **Пример**:
  ```javascript
  fs.mkdirs('path/to/new/directory');
  ```

---

### 8. `dirname(path)`
Возвращает имя директории из пути к файлу.

- **Аргументы**:
  - `path` (строка): Путь к файлу.
- **Возвращает**: Имя директории.
- **Пример**:
  ```javascript
  var dir = fs.dirname('path/to/file.txt');
  console.log('Директория:', dir); // Вывод: 'path/to'
  ```

---

### 9. `basename(path)`
Возвращает имя файла из пути.

- **Аргументы**:
  - `path` (строка): Путь к файлу.
- **Возвращает**: Имя файла.
- **Пример**:
  ```javascript
  var filename = fs.basename('path/to/file.txt');
  console.log('Имя файла:', filename); // Вывод: 'file.txt'
  ```

---

### 10. `copyfile(source, destination)`
Копирует файл из одного места в другое.

- **Аргументы**:
  - `source` (строка): Путь к исходному файлу.
  - `destination` (строка): Путь к целевому файлу.
- **Пример**:
  ```javascript
  fs.copyfile('source.txt', 'destination.txt');
  ```

---

## Пример использования

Пример использования модуля `fs` в среде JavaScript (ES5.1):

```javascript
var fs = require('fs');

// Открываем файл для чтения
var fd = fs.open('example.txt', 'r');

// Читаем 100 байт из файла
var buffer = new ArrayBuffer(100);
var bytesRead = fs.read(fd, buffer, 0, 100, null);
console.log('Прочитанные данные:', new Uint8Array(buffer).slice(0, bytesRead));

// Получаем размер файла
var size = fs.fsize(fd);
console.log('Размер файла:', size);

// Закрываем файл (не показано в коде, но обычно управляется системой ресурсов)

// Создаем директорию
fs.mkdirs('path/to/new/directory');

// Переименовываем файл
fs.rename('oldname.txt', 'newname.txt');

// Копируем файл
fs.copyfile('source.txt', 'destination.txt');
```

---

## Примечания

- Модуль `fs` предназначен для работы в изолированной среде ECMAScript с проверками безопасности для предотвращения несанкционированного доступа к файлам.
- Дескрипторы файлов (`fd`) управляются системой ресурсов, поэтому в большинстве случаев их не нужно закрывать вручную.
- Убедитесь, что пути к файлам корректны и не содержат ссылок на родительские директории (`../`), если это явно не разрешено.

Этот модуль предоставляет мощный набор функций для работы с файловой системой в JavaScript, что делает его подходящим для задач, таких как ввод-вывод файлов, управление директориями и работа с файловой системой.
